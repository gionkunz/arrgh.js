(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var Arrgh = require("./arrgh");
var ArrghUtil = require("./arrgh-util");

if (window) {
  window.Arrgh = Arrgh;
  window.Arrgh.Util = ArrghUtil;
}

},{"./arrgh":3,"./arrgh-util":2}],2:[function(require,module,exports){
"use strict";

exports.through = through;
exports.xor = xor;
exports.toArray = toArray;
exports.times = times;
exports.extend = extend;
exports.filterBy = filterBy;
exports.circularIndex = circularIndex;
function through(r) {
  return function (v) {
    return r || v;
  };
}

function xor(a, b) {
  return a ? !b : b;
}

function toArray(list) {
  return Array.prototype.slice.call(list);
}

function times(n) {
  return Array.apply(null, new Array(n));
}

function extend(target) {
  target = target || {};

  var sources = Array.prototype.slice.call(arguments, 1);
  sources.forEach(function (source) {
    for (var prop in source) {
      if (typeof source[prop] === "object" && !(source[prop] instanceof Array)) {
        target[prop] = extend.extend(target[prop], source[prop]);
      } else {
        target[prop] = source[prop];
      }
    }
  });

  return target;
}

function filterBy(key, value) {
  return function (elem) {
    return elem[key] === value;
  };
}

function circularIndex(length, index) {
  return index < 0 ? (length + index % length) % length : index % length;
}
Object.defineProperty(exports, "__esModule", {
  value: true
});

},{}],3:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { "default": obj }; };

module.exports = Arrgh;
var ArrghUtil = _interopRequireWildcard(require("./arrgh-util"));

function Arrgh(args, countOrNames) {
  args = ArrghUtil.toArray(args);

  if (typeof countOrNames === "number") {
    countOrNames = ArrghUtil.times(countOrNames).map(function (e, index) {
      return index;
    });
  }

  var arrgs = countOrNames.map(function (name, index) {
    return {
      index: index,
      name: name
    };
  });

  var assignFactory = function (ctx) {
    return function (indexOrKey, cb) {
      var filterKey = typeof indexOrKey === "number" ? "index" : "name";
      var arrg = arrgs.filter(ArrghUtil.filterBy(filterKey, indexOrKey))[0];

      if (!arrg) {
        throw new Error("Arrgument with " + filterKey + " " + indexOrKey + " not found in arrgument list " + JSON.stringify(arrgs));
      }

      arrg.value = cb(ctx.arg, ctx);

      return api;
    };
  };

  var throwFactory = function () {
    return function (error) {
      throw new Error(error);
    };
  };

  var thenFactory = function (ctx) {
    return function (cb) {
      cb(ctx);
    };
  };

  var isTypeFactory = function (ctx, negate) {
    return function (type) {
      var shouldTrigger = ArrghUtil.xor(negate, typeof ctx.arg === type);

      return {
        assign: shouldTrigger ? assignFactory(ctx) : ArrghUtil.through(api),
        "throw": shouldTrigger ? throwFactory(ctx) : ArrghUtil.through(api),
        then: shouldTrigger ? thenFactory(ctx) : ArrghUtil.through(api)
      };
    };
  };

  var checkFactory = function (ctx) {
    return function (cb) {
      var checkResult = cb(ctx.arg, ctx);

      return {
        assign: checkResult ? assignFactory(ctx) : ArrghUtil.through(api),
        "throw": checkResult ? throwFactory(ctx) : ArrghUtil.through(api),
        then: checkResult ? thenFactory(ctx) : ArrghUtil.through(api)
      };
    };
  };

  var api = {
    arg: function (index) {
      index = ArrghUtil.circularIndex(args.length, index);

      var ctx = {
        arg: args[index],
        index: index
      };

      return {
        is: isTypeFactory(ctx),
        isNot: isTypeFactory(ctx, true),
        check: checkFactory(ctx)
      };
    },
    varArg: function (startIndex, endIndex) {
      startIndex = ArrghUtil.circularIndex(args.length, startIndex);
      endIndex = endIndex || args.length;

      var ctx = {
        startIndex: startIndex,
        endIndex: endIndex,
        arg: args.slice().splice(startIndex, endIndex)
      };

      return {
        assign: assignFactory(ctx),
        then: thenFactory(ctx)
      };
    },
    get: function () {
      return arrgs.reduce(function (result, arrg) {
        result[arrg.name] = arrg.value || args[arrg.index];
        return result;
      }, {});
    }
  };

  return api;
}

},{"./arrgh-util":2}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9naW9uL1dlYnN0b3JtUHJvamVjdHMvYXJyZ2guanMvc3JjL2FycmdoLWJyb3dzZXIuanMiLCIvaG9tZS9naW9uL1dlYnN0b3JtUHJvamVjdHMvYXJyZ2guanMvc3JjL2FycmdoLXV0aWwuanMiLCIvaG9tZS9naW9uL1dlYnN0b3JtUHJvamVjdHMvYXJyZ2guanMvc3JjL2FycmdoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDL0IsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUV4QyxJQUFHLE1BQU0sRUFBRTtBQUNULFFBQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ3JCLFFBQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztDQUMvQjs7O0FDTkQsWUFBWSxDQUFDOztRQUVHLE9BQU8sR0FBUCxPQUFPO1FBTVAsR0FBRyxHQUFILEdBQUc7UUFJSCxPQUFPLEdBQVAsT0FBTztRQUlQLEtBQUssR0FBTCxLQUFLO1FBSUwsTUFBTSxHQUFOLE1BQU07UUFpQk4sUUFBUSxHQUFSLFFBQVE7UUFNUixhQUFhLEdBQWIsYUFBYTtBQXpDdEIsU0FBUyxPQUFPLENBQUMsQ0FBQyxFQUFFO0FBQ3pCLFNBQU8sVUFBVSxDQUFDLEVBQUU7QUFDbEIsV0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQ2YsQ0FBQztDQUNIOztBQUVNLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDeEIsU0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ25COztBQUVNLFNBQVMsT0FBTyxDQUFDLElBQUksRUFBRTtBQUM1QixTQUFPLEtBQUssQ0FBQyxTQUFT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Z0JBQVEsRUFBRSxRQUFRO0FBQ2xCLFdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUM7T0FDL0MsQ0FBQzs7QUFFRixhQUFPO0FBQ0wsY0FBTSxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUM7QUFDMUIsWUFBSSxFQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUM7T0FDdkIsQ0FBQztLQUNIO0FBQ0QsT0FBRyxFQUFFLFlBQVk7QUFDZixhQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQzFDLGNBQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25ELGVBQU8sTUFBTSxDQUFDO09BQ2YsRUFBRSxFQUFFLENBQUMsQ0FBQztLQUNSO0dBQ0YsQ0FBQzs7QUFFRixTQUFPLEdBQUcsQ0FBQztDQUNaIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBBcnJnaCA9IHJlcXVpcmUoJy4vYXJyZ2gnKTtcbnZhciBBcnJnaFV0aWwgPSByZXF1aXJlKCcuL2FycmdoLXV0aWwnKTtcblxuaWYod2luZG93KSB7XG4gIHdpbmRvdy5BcnJnaCA9IEFycmdoO1xuICB3aW5kb3cuQXJyZ2guVXRpbCA9IEFycmdoVXRpbDtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHRocm91Z2gocikge1xuICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gciB8fCB2O1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24geG9yKGEsIGIpIHtcbiAgcmV0dXJuIGEgPyAhYiA6IGI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KGxpc3QpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGxpc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZXMobikge1xuICByZXR1cm4gQXJyYXkuYXBwbHkobnVsbCwgbmV3IEFycmF5KG4pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IHx8IHt9O1xuXG4gIHZhciBzb3VyY2VzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VbcHJvcF0gPT09ICdvYmplY3QnICYmICEoc291cmNlW3Byb3BdIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGV4dGVuZC5leHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckJ5KGtleSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW1ba2V5XSA9PT0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaXJjdWxhckluZGV4KGxlbmd0aCwgaW5kZXgpIHtcbiAgcmV0dXJuIGluZGV4IDwgMCA/IChsZW5ndGggKyBpbmRleCAlIGxlbmd0aCkgJSBsZW5ndGggOiBpbmRleCAlIGxlbmd0aDtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgQXJyZ2hVdGlsIGZyb20gJy4vYXJyZ2gtdXRpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFycmdoKGFyZ3MsIGNvdW50T3JOYW1lcykge1xuICBhcmdzID0gQXJyZ2hVdGlsLnRvQXJyYXkoYXJncyk7XG5cbiAgaWYgKHR5cGVvZiBjb3VudE9yTmFtZXMgPT09ICdudW1iZXInKSB7XG4gICAgY291bnRPck5hbWVzID0gQXJyZ2hVdGlsLnRpbWVzKGNvdW50T3JOYW1lcykubWFwKGZ1bmN0aW9uIChlLCBpbmRleCkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGFycmdzID0gY291bnRPck5hbWVzLm1hcChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgbmFtZTogbmFtZVxuICAgIH07XG4gIH0pO1xuXG4gIHZhciBhc3NpZ25GYWN0b3J5ID0gZnVuY3Rpb24gKGN0eCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5kZXhPcktleSwgY2IpIHtcbiAgICAgIHZhciBmaWx0ZXJLZXkgPSB0eXBlb2YgaW5kZXhPcktleSA9PT0gJ251bWJlcicgPyAnaW5kZXgnIDogJ25hbWUnO1xuICAgICAgdmFyIGFycmcgPSBhcnJncy5maWx0ZXIoQXJyZ2hVdGlsLmZpbHRlckJ5KGZpbHRlcktleSwgaW5kZXhPcktleSkpWzBdO1xuXG4gICAgICBpZiAoIWFycmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcnJndW1lbnQgd2l0aCAnICsgZmlsdGVyS2V5ICsgJyAnICsgaW5kZXhPcktleSArICcgbm90IGZvdW5kIGluIGFycmd1bWVudCBsaXN0ICcgKyBKU09OLnN0cmluZ2lmeShhcnJncykpO1xuICAgICAgfVxuXG4gICAgICBhcnJnLnZhbHVlID0gY2IoY3R4LmFyZywgY3R4KTtcblxuICAgICAgcmV0dXJuIGFwaTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciB0aHJvd0ZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciB0aGVuRmFjdG9yeSA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNiKSB7XG4gICAgICBjYihjdHgpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGlzVHlwZUZhY3RvcnkgPSBmdW5jdGlvbiAoY3R4LCBuZWdhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIHZhciBzaG91bGRUcmlnZ2VyID0gQXJyZ2hVdGlsLnhvcihuZWdhdGUsIHR5cGVvZiBjdHguYXJnID09PSB0eXBlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXNzaWduOiBzaG91bGRUcmlnZ2VyID8gYXNzaWduRmFjdG9yeShjdHgpIDogQXJyZ2hVdGlsLnRocm91Z2goYXBpKSxcbiAgICAgICAgdGhyb3c6IHNob3VsZFRyaWdnZXIgPyB0aHJvd0ZhY3RvcnkoY3R4KSA6IEFycmdoVXRpbC50aHJvdWdoKGFwaSksXG4gICAgICAgIHRoZW46IHNob3VsZFRyaWdnZXIgPyB0aGVuRmFjdG9yeShjdHgpIDogQXJyZ2hVdGlsLnRocm91Z2goYXBpKVxuICAgICAgfTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBjaGVja0ZhY3RvcnkgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYikge1xuICAgICAgdmFyIGNoZWNrUmVzdWx0ID0gY2IoY3R4LmFyZywgY3R4KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXNzaWduOiBjaGVja1Jlc3VsdCA/IGFzc2lnbkZhY3RvcnkoY3R4KSA6IEFycmdoVXRpbC50aHJvdWdoKGFwaSksXG4gICAgICAgIHRocm93OiBjaGVja1Jlc3VsdCA/IHRocm93RmFjdG9yeShjdHgpIDogQXJyZ2hVdGlsLnRocm91Z2goYXBpKSxcbiAgICAgICAgdGhlbjogY2hlY2tSZXN1bHQgPyB0aGVuRmFjdG9yeShjdHgpIDogQXJyZ2hVdGlsLnRocm91Z2goYXBpKVxuICAgICAgfTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBhcGkgPSB7XG4gICAgYXJnOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIGluZGV4ID0gQXJyZ2hVdGlsLmNpcmN1bGFySW5kZXgoYXJncy5sZW5ndGgsIGluZGV4KTtcblxuICAgICAgdmFyIGN0eCA9IHtcbiAgICAgICAgYXJnOiBhcmdzW2luZGV4XSxcbiAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpczogaXNUeXBlRmFjdG9yeShjdHgpLFxuICAgICAgICBpc05vdDogaXNUeXBlRmFjdG9yeShjdHgsIHRydWUpLFxuICAgICAgICBjaGVjazogY2hlY2tGYWN0b3J5KGN0eClcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YXJBcmc6IGZ1bmN0aW9uIChzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgICAgc3RhcnRJbmRleCA9IEFycmdoVXRpbC5jaXJjdWxhckluZGV4KGFyZ3MubGVuZ3RoLCBzdGFydEluZGV4KTtcbiAgICAgIGVuZEluZGV4ID0gZW5kSW5kZXggfHwgYXJncy5sZW5ndGg7XG5cbiAgICAgIHZhciBjdHggPSB7XG4gICAgICAgIHN0YXJ0SW5kZXg6IHN0YXJ0SW5kZXgsXG4gICAgICAgIGVuZEluZGV4OiBlbmRJbmRleCxcbiAgICAgICAgYXJnOiBhcmdzLnNsaWNlKCkuc3BsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXNzaWduOiBhc3NpZ25GYWN0b3J5KGN0eCksXG4gICAgICAgIHRoZW46IHRoZW5GYWN0b3J5KGN0eClcbiAgICAgIH07XG4gICAgfSxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhcnJncy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgYXJyZykge1xuICAgICAgICByZXN1bHRbYXJyZy5uYW1lXSA9IGFycmcudmFsdWUgfHwgYXJnc1thcnJnLmluZGV4XTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGFwaTtcbn1cbiJdfQ==
